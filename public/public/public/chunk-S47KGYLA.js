import{a as z,b as O}from"./chunk-HBKICLYL.js";import{k as M,l as S,o as k}from"./chunk-AGGAS45M.js";import{Ab as r,Bb as F,Cb as g,Db as T,Ea as y,Ha as s,Ma as A,Sa as E,Xa as f,ca as x,da as _,db as u,kb as n,lb as a,mb as P,n as I,nb as v,rb as C,sa as d,sb as h}from"./chunk-ZTKSXV6Y.js";import{h as b}from"./chunk-FK42CRUA.js";function D(l,t){if(l&1&&(n(0,"span",9),r(1),a()),l&2){let e=t.$implicit;s(),g(" ",e," ")}}function V(l,t){if(l&1){let e=v();n(0,"button",10),C("click",function(){let c=x(e).$implicit,o=h();return _(o.seleccionarLetra(c))}),r(1),a()}if(l&2){let e=t.$implicit,i=h();u("disabled",i.letrasUsadas().includes(e)||i.juegoTerminado()),s(),g(" ",e," ")}}function L(l,t){if(l&1){let e=v();n(0,"div",11)(1,"h5"),r(2,"\u{1F635} \xA1Te ahorcaron!"),a(),n(3,"p"),r(4,"La palabra era: "),n(5,"strong"),r(6),a()(),n(7,"p"),r(8),a(),n(9,"button",12),C("click",function(){x(e);let c=h();return _(c.reiniciar())}),r(10,"\u{1F501} Volver a empezar"),a()()}if(l&2){let e=h();s(6),F(e.palabraCorrecta()),s(2),T("Aciertos: ",e.aciertos()," | Tiempo: ",e.tiempo(),"s")}}var j=class l{constructor(t){this.http=t;this.preloadImagenes(),this.iniciarJuego()}vidas=d(6);tiempo=d(0);aciertos=d(0);juegoTerminado=d(!1);palabra=d([]);letrasUsadas=d([]);letraActual=d("");mostrarResumen=d(!1);palabraCorrecta=d("");temporizadorId=null;abecedario="ABCDEFGHIJKLMN\xD1OPQRSTUVWXYZ".split("");diccionario=[];audioWin=new Audio("assets/sounds/win.mp3");preloadImagenes(){for(let t=0;t<=6;t++){let e=new Image;e.src=`assets/imagenes/${t}.png`}}reproducirSonido(t){t==="assets/sounds/win.mp3"&&(this.audioWin.currentTime=0,this.audioWin.play())}iniciarJuego(){return b(this,null,function*(){this.tiempo.set(0),this.temporizadorId&&clearInterval(this.temporizadorId),this.temporizadorId=setInterval(()=>{this.tiempo.update(m=>m+1)},1e3);let t=this.getLetraAleatoria(),e=yield this.cargarPalabrasPorLetra(t),i=this.aciertos(),c=10;i===0?c=4:i===1?c=5:i===2&&(c=6);let o=e.filter(m=>{let w=this.limpiarPalabra(m);return w.length>=3&&w.length<=c});o.length===0&&(o=e);let p=this.limpiarPalabra(this.getPalabraAleatoria(o));this.palabraCorrecta.set(p.toUpperCase()),this.palabra.set(p.toUpperCase().split("").map(m=>"_")),this.juegoTerminado.set(!1),this.mostrarResumen.set(!1),this.vidas.set(6),this.tiempo.set(0),this.letrasUsadas.set([])})}getLetraAleatoria(){let t="abcdefghijklmnopqrstuvwxyz";return t[Math.floor(Math.random()*t.length)]}cargarPalabrasPorLetra(t){return b(this,null,function*(){let e=`assets/diccionario/${t}.txt`;try{return((yield I(this.http.get(e,{responseType:"text"})))?.split(`
`)??[]).slice(1).filter(o=>/^[a-zA-ZñÑáéíóúÁÉÍÓÚüÜ]+$/.test(o))}catch{return["angular"]}})}limpiarPalabra(t){return t.split(",")[0].split(" ")[0].normalize("NFD").replace(/[\u0300-\u036f]/g,"")}getPalabraAleatoria(t){return t[Math.floor(Math.random()*t.length)]}seleccionarLetra(t){if(this.juegoTerminado())return;let e=this.letrasUsadas();if(e.includes(t))return;this.letrasUsadas.set([...e,t]);let i=this.palabraCorrecta(),c=this.palabra();if(i.includes(t)){let o=c.map((p,m)=>i[m]===t?t:p);this.palabra.set(o),o.includes("_")||(this.aciertos.update(p=>p+1),setTimeout(()=>this.iniciarJuego(),1e3))}else this.vidas.update(o=>o-1),this.vidas()===0&&this.finalizarJuego()}finalizarJuego(){this.temporizadorId&&clearInterval(this.temporizadorId),this.juegoTerminado.set(!0),this.mostrarResumen.set(!0),this.reproducirSonido("assets/sounds/win.mp3")}reiniciar(){this.aciertos.set(0),this.iniciarJuego()}get imagenActual(){return`assets/imagenes/${6-this.vidas()}.png`}static \u0275fac=function(e){return new(e||l)(A(z))};static \u0275cmp=E({type:l,selectors:[["friki-club-ahorcado"]],decls:21,vars:7,consts:[[1,"wrapper","bg-white","p-4","rounded","shadow-lg","text-center"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"imagen-container","mb-3"],["alt","Estado del ahorcado",1,"img-fluid",3,"src"],[1,"palabra","mb-3","d-flex","justify-content-center","gap-2","flex-wrap"],["class","letra border border-dark px-2 py-1 rounded",4,"ngFor","ngForOf"],[1,"teclado","d-flex","flex-wrap","justify-content-center","gap-2"],["class","btn btn-outline-dark",3,"disabled","click",4,"ngFor","ngForOf"],["class","alert alert-info mt-4",4,"ngIf"],[1,"letra","border","border-dark","px-2","py-1","rounded"],[1,"btn","btn-outline-dark",3,"click","disabled"],[1,"alert","alert-info","mt-4"],[1,"btn","btn-primary","mt-2",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"strong"),r(4,"\u2764\uFE0F"),a(),r(5),a(),n(6,"div")(7,"strong"),r(8,"\u23F1\uFE0F"),a(),r(9),a(),n(10,"div")(11,"strong"),r(12,"\u2714\uFE0F"),a(),r(13),a()(),n(14,"div",2),P(15,"img",3),a(),n(16,"div",4),f(17,D,2,1,"span",5),a(),n(18,"div",6),f(19,V,2,2,"button",7),a(),f(20,L,11,3,"div",8),a()),e&2&&(s(5),g(" Vidas: ",i.vidas(),""),s(4),g(" Tiempo: ",i.tiempo(),"s"),s(4),g(" Aciertos: ",i.aciertos(),""),s(2),u("src",i.imagenActual,y),s(2),u("ngForOf",i.palabra()),s(2),u("ngForOf",i.abecedario),s(),u("ngIf",i.mostrarResumen()))},dependencies:[k,M,S,O],styles:[".wrapper[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto}.imagen-container[_ngcontent-%COMP%]{max-height:200px}.imagen-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px;object-fit:contain}.palabra[_ngcontent-%COMP%]   .letra[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;width:40px;height:50px;display:inline-flex;justify-content:center;align-items:center;background-color:#f8f9fa;border:2px solid #343a40;border-radius:8px}.teclado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;font-weight:700}"]})};export{j as AhorcadoComponent};
