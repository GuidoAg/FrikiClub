import{a as k,b as D}from"./chunk-HBKICLYL.js";import{k as M,l as z,o as S}from"./chunk-AGGAS45M.js";import{Ab as r,Bb as P,Cb as u,Db as F,Ea as y,Ha as s,Ma as E,Sa as A,Xa as b,ca as x,da as _,db as m,kb as n,lb as a,mb as T,n as w,nb as v,rb as C,sa as d,sb as g}from"./chunk-ZTKSXV6Y.js";import{h as f}from"./chunk-FK42CRUA.js";function j(l,e){if(l&1&&(n(0,"span",9),r(1),a()),l&2){let t=e.$implicit;s(),u(" ",t," ")}}function L(l,e){if(l&1){let t=v();n(0,"button",10),C("click",function(){let c=x(t).$implicit,o=g();return _(o.seleccionarLetra(c))}),r(1),a()}if(l&2){let t=e.$implicit,i=g();m("disabled",i.letrasUsadas().includes(t)||i.juegoTerminado()),s(),u(" ",t," ")}}function V(l,e){if(l&1){let t=v();n(0,"div",11)(1,"h5"),r(2,"\u{1F635} \xA1Te ahorcaron!"),a(),n(3,"p"),r(4,"La palabra era: "),n(5,"strong"),r(6),a()(),n(7,"p"),r(8),a(),n(9,"button",12),C("click",function(){x(t);let c=g();return _(c.reiniciar())}),r(10,"\u{1F501} Volver a empezar"),a()()}if(l&2){let t=g();s(6),P(t.palabraCorrecta()),s(2),F("Aciertos: ",t.aciertos()," | Tiempo: ",t.tiempo(),"s")}}var O=class l{constructor(e){this.http=e;this.preloadImagenes(),this.preloadAudios(),this.iniciarTemporizador(),this.preloadDiccionarios().then(()=>{this.iniciarJuego()})}vidas=d(6);tiempo=d(0);aciertos=d(0);juegoTerminado=d(!1);palabra=d([]);letrasUsadas=d([]);letraActual=d("");mostrarResumen=d(!1);palabraCorrecta=d("");temporizadorId=null;abecedario="ABCDEFGHIJKLMN\xD1OPQRSTUVWXYZ".split("");imagenesPreCargadas=[];audios={};diccionarios={};preloadImagenes(){for(let e=0;e<=6;e++){let t=new Image;t.src=`assets/imagenes/${e}.png`,this.imagenesPreCargadas.push(t)}}preloadAudios(){["win","punto"].forEach(t=>{let i=new Audio(`assets/sounds/${t}.mp3`);i.load(),this.audios[t]=i})}reproducirSonido(e){let t=this.audios[e];t&&(t.currentTime=0,t.play().catch(i=>console.error("Error sonido:",i)))}preloadDiccionarios(){return f(this,null,function*(){let e="abcdefghijklmnopqrstuvwxyz".split("");for(let t of e){let i=yield this.cargarPalabrasPorLetra(t);this.diccionarios[t]=i}})}iniciarJuego(){return f(this,null,function*(){let e=this.getLetraAleatoria(),t=this.diccionarios[e]||["pepe"],i=this.aciertos(),c=10;i===0?c=4:i===1?c=5:i===2&&(c=6);let o=t.filter(h=>{let I=this.limpiarPalabra(h);return I.length>=3&&I.length<=c});o.length===0&&(o=t);let p=this.limpiarPalabra(this.getPalabraAleatoria(o));this.palabraCorrecta.set(p.toUpperCase()),this.palabra.set(p.toUpperCase().split("").map(h=>"_")),this.juegoTerminado.set(!1),this.mostrarResumen.set(!1),this.vidas.set(6),this.letrasUsadas.set([])})}getLetraAleatoria(){let e="abc";return e[Math.floor(Math.random()*e.length)]}cargarPalabrasPorLetra(e){return f(this,null,function*(){let t=`assets/diccionario/${e}.txt`;try{return((yield w(this.http.get(t,{responseType:"text"})))?.split(`
`)??[]).slice(1).filter(o=>/^[a-zA-ZñÑáéíóúÁÉÍÓÚüÜ]+$/.test(o))}catch{return["angular"]}})}limpiarPalabra(e){return e.split(",")[0].split(" ")[0].normalize("NFD").replace(/[\u0300-\u036f]/g,"")}getPalabraAleatoria(e){return e[Math.floor(Math.random()*e.length)]}seleccionarLetra(e){if(this.juegoTerminado())return;let t=this.letrasUsadas();if(t.includes(e))return;this.letrasUsadas.set([...t,e]);let i=this.palabraCorrecta(),c=this.palabra();if(i.includes(e)){let o=c.map((p,h)=>i[h]===e?e:p);this.palabra.set(o),o.includes("_")||(this.aciertos.update(p=>p+1),this.reproducirSonido("punto"),setTimeout(()=>this.iniciarJuego(),400))}else this.vidas.update(o=>o-1),this.vidas()===0&&this.finalizarJuego()}finalizarJuego(){this.temporizadorId&&(clearInterval(this.temporizadorId),this.temporizadorId=null),this.juegoTerminado.set(!0),this.mostrarResumen.set(!0),this.reproducirSonido("win")}reiniciar(){this.aciertos.set(0),this.tiempo.set(0),this.iniciarTemporizador(),this.iniciarJuego()}iniciarTemporizador(){this.temporizadorId||(this.temporizadorId=setInterval(()=>{this.tiempo.update(e=>e+1)},1e3))}get imagenActual(){return`assets/imagenes/${6-this.vidas()}.png`}static \u0275fac=function(t){return new(t||l)(E(k))};static \u0275cmp=A({type:l,selectors:[["friki-club-ahorcado"]],decls:21,vars:7,consts:[[1,"wrapper","bg-white","p-4","rounded","shadow-lg","text-center"],[1,"d-flex","justify-content-between","align-items-center","mb-3"],[1,"imagen-container","mb-3"],["alt","Estado del ahorcado",1,"img-fluid",3,"src"],[1,"palabra","mb-3","d-flex","justify-content-center","gap-2","flex-wrap"],["class","letra border border-dark px-2 py-1 rounded",4,"ngFor","ngForOf"],[1,"teclado","d-flex","flex-wrap","justify-content-center","gap-2"],["class","btn btn-outline-dark",3,"disabled","click",4,"ngFor","ngForOf"],["class","alert alert-info mt-4",4,"ngIf"],[1,"letra","border","border-dark","px-2","py-1","rounded"],[1,"btn","btn-outline-dark",3,"click","disabled"],[1,"alert","alert-info","mt-4"],[1,"btn","btn-primary","mt-2",3,"click"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"strong"),r(4,"\u2764\uFE0F"),a(),r(5),a(),n(6,"div")(7,"strong"),r(8,"\u23F1\uFE0F"),a(),r(9),a(),n(10,"div")(11,"strong"),r(12,"\u2714\uFE0F"),a(),r(13),a()(),n(14,"div",2),T(15,"img",3),a(),n(16,"div",4),b(17,j,2,1,"span",5),a(),n(18,"div",6),b(19,L,2,2,"button",7),a(),b(20,V,11,3,"div",8),a()),t&2&&(s(5),u(" Vidas: ",i.vidas(),""),s(4),u(" Tiempo: ",i.tiempo(),"s"),s(4),u(" Aciertos: ",i.aciertos(),""),s(2),m("src",i.imagenActual,y),s(2),m("ngForOf",i.palabra()),s(2),m("ngForOf",i.abecedario),s(),m("ngIf",i.mostrarResumen()))},dependencies:[S,M,z,D],styles:[".wrapper[_ngcontent-%COMP%]{max-width:600px;margin:3rem auto}.imagen-container[_ngcontent-%COMP%]{max-height:200px}.imagen-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:200px;object-fit:contain}.palabra[_ngcontent-%COMP%]   .letra[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;width:40px;height:50px;display:inline-flex;justify-content:center;align-items:center;background-color:#f8f9fa;border:2px solid #343a40;border-radius:8px}.teclado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;font-weight:700}"]})};export{O as AhorcadoComponent};
