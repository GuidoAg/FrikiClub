import{a as I}from"./chunk-37WAIENX.js";import"./chunk-LJ5XHLMQ.js";import{k as _,l as h,o as S,p as C}from"./chunk-ODFDANH7.js";import{Ab as i,Bb as l,Ha as c,Lb as x,Ma as g,Nb as v,Q as u,Sa as f,Xa as s,db as d,kb as t,lb as n,mb as b,sb as E}from"./chunk-AWTQUO7P.js";import{h as m}from"./chunk-FK42CRUA.js";var p=class a{constructor(){}obtenerEncuestas(){return m(this,null,function*(){let{data:r,error:e}=yield I.from("Encuestas").select("usuario_id, nombre, edad, telefono, pregunta1, pregunta2, pregunta3, created_at");if(e)throw console.error("Error al obtener encuestas:",e.message),e;return(r??[]).map(o=>({usuario_id:o.usuario_id,nombre:o.nombre,edad:o.edad,telefono:o.telefono,pregunta1:o.pregunta1,pregunta2:this.parsePregunta2(o.pregunta2),pregunta3:o.pregunta3,created_at:o.created_at}))})}parsePregunta2(r){try{let e=JSON.parse(r??"[]");return Array.isArray(e)?e:[]}catch{return[]}}static \u0275fac=function(e){return new(e||a)};static \u0275prov=u({token:a,factory:a.\u0275fac,providedIn:"root"})};function M(a,r){a&1&&(t(0,"div",4),b(1,"div",5),n())}function k(a,r){if(a&1&&(t(0,"li"),i(1),n()),a&2){let e=r.$implicit;c(),l(e)}}function F(a,r){if(a&1&&(t(0,"tr")(1,"td"),i(2),n(),t(3,"td"),i(4),n(),t(5,"td"),i(6),n(),t(7,"td"),i(8),n(),t(9,"td"),i(10),n(),t(11,"td")(12,"ul"),s(13,k,2,1,"li",8),n()(),t(14,"td"),i(15),n(),t(16,"td"),i(17),x(18,"date"),n()()),a&2){let e=r.$implicit,o=r.index;c(2),l(o+1),c(2),l(e.nombre),c(2),l(e.edad),c(2),l(e.telefono),c(2),l(e.pregunta1),c(3),d("ngForOf",e.pregunta2),c(2),l(e.pregunta3),c(2),l(v(18,8,e.created_at,"short"))}}function R(a,r){if(a&1&&(t(0,"table",6)(1,"thead",7)(2,"tr")(3,"th"),i(4,"#"),n(),t(5,"th"),i(6,"Usuario"),n(),t(7,"th"),i(8,"Edad"),n(),t(9,"th"),i(10,"Telefono"),n(),t(11,"th"),i(12,"Opinion"),n(),t(13,"th"),i(14,"Recomendacion"),n(),t(15,"th"),i(16,"Vuelve"),n(),t(17,"th"),i(18,"Fecha"),n()()(),t(19,"tbody"),s(20,F,19,11,"tr",8),n()()),a&2){let e=E();c(20),d("ngForOf",e.encuestas)}}var y=class a{constructor(r){this.encuestaService=r}cargando=!1;encuestas=[];ngOnInit(){this.cargarEncuesta()}cargarEncuesta(){return m(this,null,function*(){this.cargando=!0;try{this.encuestas=yield this.encuestaService.obtenerEncuestas()}catch(r){console.error("Error cargando encuestas:",r)}this.cargando=!1})}static \u0275fac=function(e){return new(e||a)(g(p))};static \u0275cmp=f({type:a,selectors:[["friki-club-resultado-encuesta"]],decls:4,vars:2,consts:[[1,"ranking-wrapper"],["class","text-center mt-5",4,"ngIf"],[1,"table-responsive","px-3"],["class","table table-dark table-striped table-bordered text-center",4,"ngIf"],[1,"text-center","mt-5"],["role","status",1,"spinner-border"],[1,"table","table-dark","table-striped","table-bordered","text-center"],[1,"thead-light"],[4,"ngFor","ngForOf"]],template:function(e,o){e&1&&(t(0,"div",0),s(1,M,2,0,"div",1),t(2,"div",2),s(3,R,21,1,"table",3),n()()),e&2&&(c(),d("ngIf",o.cargando),c(2),d("ngIf",!o.cargando))},dependencies:[C,_,h,S],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-color:#1e1e1e;color:#fff}.ranking-wrapper[_ngcontent-%COMP%]{padding-top:80px;padding-bottom:40px;min-height:100vh;display:flex;flex-direction:column;align-items:center;background-color:#1e1e1e}.btn-group[_ngcontent-%COMP%]{margin-bottom:30px}.table[_ngcontent-%COMP%]{width:100%;max-width:95vw;margin:auto;background-color:#2c2c2c;border-radius:8px;overflow:hidden;font-size:1.1rem}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#343a40;color:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}"]})};export{y as ResultadoEncuestaComponent};
