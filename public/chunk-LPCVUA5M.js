import{p as j}from"./chunk-7YSXQOLL.js";import{a as E}from"./chunk-BNBGN7Y6.js";import{l as R,o as S}from"./chunk-YMF7KUPX.js";import{Ab as s,Bb as k,Cb as I,Ea as h,Ha as c,Ma as b,Ob as w,Q as C,Sa as M,V as x,Xa as g,ca as m,da as u,db as l,kb as o,lb as n,mb as f,nb as v,rb as p,sb as d,zb as y}from"./chunk-AWTQUO7P.js";import"./chunk-FK42CRUA.js";var _=class a{constructor(t){this.http=t}baseUrl="https://deckofcardsapi.com/api/deck";deckId="";crearMazo(){return this.http.get(`${this.baseUrl}/new/shuffle/?deck_count=1`)}sacarCarta(t=1){return this.http.get(`${this.baseUrl}/${this.deckId}/draw/?count=${t}`)}setDeckId(t){this.deckId=t}getDeckId(){return this.deckId}static \u0275fac=function(e){return new(e||a)(x(E))};static \u0275prov=C({token:a,factory:a.\u0275fac,providedIn:"root"})};function V(a,t){a&1&&(o(0,"div",6)(1,"span",7),s(2,"Cargando..."),n()())}function P(a,t){if(a&1&&f(0,"img",14),a&2){let e=d(2);l("src",e.cartaRevelada?e.siguienteCarta.image:"https://deckofcardsapi.com/static/img/back.png",h)}}function z(a,t){a&1&&f(0,"img",15)}function D(a,t){if(a&1){let e=v();o(0,"div")(1,"button",16),p("click",function(){m(e);let r=d(2);return u(r.adivinar("mayor"))}),s(2," Mayor "),n(),o(3,"button",17),p("click",function(){m(e);let r=d(2);return u(r.adivinar("igual"))}),s(4," Igual "),n(),o(5,"button",18),p("click",function(){m(e);let r=d(2);return u(r.adivinar("menor"))}),s(6," Menor "),n()()}}function N(a,t){if(a&1){let e=v();o(0,"div")(1,"button",19),p("click",function(){m(e);let r=d(2);return u(r.siguienteRonda())}),s(2," Siguiente ronda "),n()()}}function J(a,t){if(a&1){let e=v();o(0,"div")(1,"button",20),p("click",function(){m(e);let r=d(2);return u(r.iniciarJuego())}),s(2," Reiniciar Juego "),n()()}}function U(a,t){if(a&1&&(o(0,"div")(1,"div",8)(2,"div",9)(3,"p",10),s(4,"Carta actual"),n(),f(5,"img",11),n(),o(6,"div",9)(7,"p",10),s(8,"Carta siguiente"),n(),g(9,P,1,1,"img",12)(10,z,1,0,"ng-template",null,0,w),n()(),g(12,D,7,0,"div",5),o(13,"div",13)(14,"h4"),s(15),n(),o(16,"p"),s(17),n()(),g(18,N,3,0,"div",5)(19,J,3,0,"div",5),n()),a&2){let e=y(11),i=d();c(5),l("src",i.cartaActual==null?null:i.cartaActual.image,h),c(4),l("ngIf",i.siguienteCarta)("ngIfElse",e),c(3),l("ngIf",!i.terminado&&!i.cartaRevelada),c(3),k(i.mensaje),c(2),I("Puntuaci\xF3n: ",i.puntaje,""),c(),l("ngIf",!i.terminado&&i.cartaRevelada),c(),l("ngIf",i.terminado)}}var T=class a{constructor(t){this.deckService=t;this.preloadAudios()}cartaActual=null;siguienteCarta=null;cartasRestantes=[];puntaje=0;mensaje="";cargando=!1;terminado=!1;cartaRevelada=!1;audios={};ngOnInit(){this.iniciarJuego()}preloadAudios(){["punto","win"].forEach(e=>{let i=new Audio(`assets/sounds/${e}.mp3`);i.load(),this.audios[e]=i})}reproducirSonido(t){let e=this.audios[t];e&&(e.currentTime=0,e.volume=.5,e.play().catch(i=>console.error("Error sonido:",i)))}iniciarJuego(){this.cargando=!0,this.puntaje=0,this.mensaje="",this.terminado=!1,this.cartaRevelada=!1,this.cartasRestantes=[],this.cartaActual=null,this.siguienteCarta=null,this.deckService.crearMazo().subscribe(t=>{this.deckService.setDeckId(t.deck_id),this.deckService.sacarCarta(52).subscribe(e=>{this.cartasRestantes=e.cards,this.cartaActual=this.cartasRestantes.shift()||null,this.siguienteCarta=this.cartasRestantes.shift()||null,this.preloadCardImages(this.cartasRestantes),this.cargando=!1})})}adivinar(t){if(!this.cartaActual||!this.siguienteCarta||this.cartaRevelada||this.terminado)return;let e=this.valorCarta(this.cartaActual.value),i=this.valorCarta(this.siguienteCarta.value),r=!1;t==="mayor"?r=i>e:t==="menor"?r=i<e:t==="igual"&&(r=i===e),this.cartaRevelada=!0,r?(this.mensaje=t==="igual"?"\xA1Correcto! (Iguales)":"\xA1Correcto!",this.puntaje+=t==="igual"?2:1,this.reproducirSonido("punto")):(this.mensaje="\xA1Incorrecto!",this.reproducirSonido("win"),this.terminado=!0)}siguienteRonda(){!this.cartaRevelada||this.terminado||(this.cartaActual=this.siguienteCarta,this.siguienteCarta=this.cartasRestantes.shift()||null,this.mensaje="",this.cartaRevelada=!1,this.siguienteCarta||(this.terminado=!0,this.mensaje="\xA1Ganaste! Se terminaron las cartas del mazo \u{1F389}",this.reproducirSonido("win")))}valorCarta(t){return{ACE:14,KING:13,QUEEN:12,JACK:11}[t]??parseInt(t,10)}preloadCardImages(t){t.forEach(e=>{let i=new Image;i.src=e.image})}static \u0275fac=function(e){return new(e||a)(b(_))};static \u0275cmp=M({type:a,selectors:[["friki-club-mayor-menor"]],decls:6,vars:2,consts:[["cartaTapada",""],[1,"container","text-center"],[1,"card","p-4","shadow-lg","rounded-4","bg-dark","text-white"],[1,"mb-3"],["class","spinner-border text-light my-3","role","status",4,"ngIf"],[4,"ngIf"],["role","status",1,"spinner-border","text-light","my-3"],[1,"visually-hidden"],[1,"row","justify-content-center","mb-4"],[1,"col-6","col-md-5","text-center"],[1,"text-muted"],["alt","Carta actual",1,"img-fluid","carta-img",3,"src"],["alt","Carta siguiente","class","img-fluid carta-img",3,"src",4,"ngIf","ngIfElse"],[1,"mt-3"],["alt","Carta siguiente",1,"img-fluid","carta-img",3,"src"],["src","https://deckofcardsapi.com/static/img/back.png","alt","Carta siguiente",1,"img-fluid","carta-img"],[1,"btn","btn-success","me-2",3,"click"],[1,"btn","btn-warning","me-2",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-light","mt-2",3,"click"],[1,"btn","btn-primary","mt-3",3,"click"]],template:function(e,i){e&1&&(o(0,"div",1)(1,"div",2)(2,"h2",3),s(3,"Juego: Mayor o Menor"),n(),g(4,V,3,0,"div",4)(5,U,20,8,"div",5),n()()),e&2&&(c(4),l("ngIf",i.cargando),c(),l("ngIf",!i.cargando))},dependencies:[S,R,j],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}.container[_ngcontent-%COMP%]{max-width:700px;padding:2rem;min-height:90vh;display:flex;flex-direction:column;justify-content:center}.card[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1e1e2f,#2c2c3c);border:none}button[_ngcontent-%COMP%]{min-width:140px;font-size:1.4rem}.carta-img[_ngcontent-%COMP%]{max-height:200px;border-radius:1rem;box-shadow:0 4px 10px #00000080;transition:transform .2s ease}h2[_ngcontent-%COMP%], h4[_ngcontent-%COMP%]{font-weight:600;color:#fff}.carta-img-revelada[_ngcontent-%COMP%]{max-height:220px;border-radius:1rem;border:2px solid #ff4444;box-shadow:0 0 15px #f449}"]})};export{T as MayorMenorComponent};
